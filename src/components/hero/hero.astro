---
import type { ImageMetadata } from "astro";
// import { Image } from "astro:assets";
// import Markdown from "../utility/markdown.astro";

interface Props{
    background_image:{
        image_path: string;
        alt_text:string;
    }
    heading: {
        heading_text:string;
        heading_color: string;
    };
    subheading:{
        markdown_content: string;
        color: string;
    };
    buttons:[
        {
            _bookshop_name: string;
            text: string;
            link: string;
            background_color?:string;
            hover_brightness: number;
            text_color: string;
        },
    ];
}

const block = Astro.props;
const buttons = import.meta.glob("/src/components/buttons/**/*.astro",{
    eager: true,
});

const images = import.meta.glob<{ default: ImageMetadata }>(
  "/src/assets/**/*.{jpeg,jpg,png,gif,webp}",
  { eager: true }
);

// Extract image URLS from image metadeta
const getImageUrl = (path:string)=>{
    const image = images[path];
    return image ? image.default.src : path;
};

const backgroundImageSrc = getImageUrl(block.background_image.image_path);
---
<!-- ============================================ -->
  <!--                    Hero                      -->
  <!-- ============================================ -->

  <section id="hero">
    <div class="cs-container">
      <div class="cs-flex-group">
        <span class="cs-topper">Starter Kit</span>
        <h2 class="cs-title" style={`color: ${block.heading.heading_color};`}>{block.heading.heading_text}</h2>
        <p class="cs-text" style={`color: ${block.subheading.color};`}>
             {block.subheading.markdown_content}
        </p>
        <a href="/about" class="cs-button-solid">Explore More</a>
        <a href="/contact" class="cs-button-transparent">
          <img
            class="cs-img"
            loading="lazy"
            decoding="async"
            src="https://csimg.nyc3.digitaloceanspaces.com/Hero/play.svg"
            alt="play icon"
            width="17"
            height="17"
          />
          Get in Touch
        </a>
      </div>
    </div>

    <!-- Background Image -->
    <picture class="cs-picture">
      <source
        media="(max-width: 600px)"
        srcset={backgroundImageSrc}
      />
      <source media="(min-width: 601px)" srcset={backgroundImageSrc} />
      <img
        aria-hidden="true"
        decoding="async"
        src={backgroundImageSrc}
        alt={block.background_image.alt_text}
        width="2500"
        height="1667"
        loading="eager"
      />
    </picture>
  </section>

  <style>
    /* HERO */

/* Mobile - 360px */
@media only screen and (min-width: 0em) {
  #hero {
    font-family: "Roboto", "Arial", sans-serif;
    text-align: center;
    padding: 0 1rem;
    padding-bottom: 3.125rem;
    position: relative;
    z-index: 1;
    overflow: hidden;
  }

  #hero .cs-picture {
    width: 100%;
    height: 100%;
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    z-index: -2;
  }

  #hero .cs-picture:before {
    content: "";
    width: 100%;
    height: 100%;
    background: #000;
    opacity: 0.7;
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    z-index: 1;
    pointer-events: none;
  }

  #hero .cs-picture img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    position: absolute;
    top: 0;
    left: 0;
  }

  #hero .cs-container {
    width: 100%;
    max-width: 80rem;
    margin: auto;
    padding: clamp(9em, 25.95vw, 17.5em) 0;
    position: relative;
  }

  #hero .cs-container:before {
    content: "";
    width: 1px;
    height: 100%;
    background: linear-gradient(to bottom, rgba(250, 251, 252, 0.5) 0%, rgba(250, 251, 252, 0) 100%);
    opacity: 1;
    display: block;
    position: absolute;
    top: 0;
    left: 0;
  }

  #hero .cs-flex-group {
    width: 80vw;
    max-width: clamp(29em, 60vw, 35.125em);
    margin: auto;
    margin-bottom: clamp(3.75em, 15.5vw, 13.75em);
    box-sizing: border-box;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    flex-wrap: wrap;
  }

  #hero .cs-topper {
    text-align: center;
    margin-bottom: 1rem;
    color: var(--primary);
  }

  #hero .cs-title {
    text-align: center;
    width: 100%;
    color: var(--bodyTextColorWhite);
  }

  #hero .cs-text {
    text-align: center;
    margin: 0 auto clamp(2rem, 4vw, 2.5rem) 0;
    margin-bottom: clamp(2.5rem, 4vw, 3rem);
    color: var(--bodyTextColorWhite);
  }

  #hero .cs-button-solid {
    line-height: clamp(2.875em, 5.5vw, 3.5em);
    height: initial;
    margin-bottom: 1rem;
  }

  #hero .cs-button-transparent {
    font-size: 1rem;
    font-weight: 700;
    line-height: clamp(2.875em, 5.5vw, 3.5em);
    text-decoration: none;
    width: 11.25rem;
    height: clamp(2.875em, 5.5vw, 3.5em);
    margin: 0 0.5rem;
    box-sizing: border-box;
    padding: 0;
    color: #fff;
    background-color: transparent;
    border: 1px solid var(--bodyTextColorWhite);
    display: inline-flex;
    justify-content: center;
    align-items: center;
    position: relative;
    z-index: 1;
  }

  #hero .cs-button-transparent:before {
    content: "";
    background: #000;
    opacity: 1;
    display: block;
    position: absolute;
    top: -1px;
    right: -1px;
    bottom: -1px;
    left: -1px;
    z-index: -1;
    transform: scaleX(0);
    transition: transform 0.3s;
    transform-origin: left;
  }

  #hero .cs-button-transparent:hover:before {
    transform: scaleX(1);
  }

  #hero .cs-button-transparent .cs-img {
    margin-right: 0.75rem;
    display: block;
  }
}

/* Tablet - 768px */
@media only screen and (min-width: 48em) {
  #hero {
    padding: 0 clamp(2em, 5vw, 2.5em);
  }

  #hero .cs-container {
    padding: clamp(7em, 27.95vw, 17.5em) 0 clamp(9em, 30.95vw, 23.5em) 0;
  }

  #hero .cs-container:after {
    content: "";
    width: 1px;
    height: 100%;
    background: linear-gradient(to bottom, rgba(250, 251, 252, 0) 0%, rgba(250, 251, 252, 0.5) 100%);
    opacity: 1;
    display: block;
    position: absolute;
    top: 0;
    right: 0;
  }

  #hero .cs-button-solid {
    margin-right: 1.25rem;
    margin-bottom: 0;
  }
}

/* Desktop Parallax Effect - 1300px */
@media only screen and (min-width: 81.25em) {
  #hero {
    background: url("/assets/images/landing.jpg");
    background-position: center;
    background-size: cover;
    background-repeat: no-repeat;
    background-attachment: fixed;
  }
}

/* Dark Mode */
@media only screen and (min-width: 0em) {
  body.dark-mode #hero .cs-background:before {
    opacity: 0.8;
  }
}

  </style>